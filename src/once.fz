# cache result of execution of `f`
#
module once(T type, f ()->T) is
  cache := mut (option T) nil

  module get T =>
    if cache.get.is_nil
      cache <- f()
    cache.get.get
